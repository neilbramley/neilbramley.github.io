<!DOCTYPE html>
<html>

<head>
    <title>Physical Linda</title>

    <!-- Libraries -->
    <script src="lib/ivank.js"></script>
    <script src="lib/jquery.min.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
</head>

<body>

<!-- TASK 1 -->

<div sid="task1" style = "width: 900px; margin: 0 auto;">
    <h2>Task 1: Simultaneous tracking</h2>
    <fieldset style = "display:inline-block;">
        <legend>Object 1</legend>
        <fieldset style="float:left;margin:5px">
            x (m):<input type="text" class = "input" value="0" id="in_t1_x1" style="width:50px;">
            y (m):<input type="text" class = "input" value="1" id="in_t1_y1" style="width:50px;">
        </fieldset>

        <fieldset style="float:left;margin:5px">
            v (m/s):<input type="text" class = "input" value="1.2" id="in_t1_v1" style="width:50px;">
            angle (radians):<input type="text" class = "input" value="0.2" id="in_t1_a1" style="width:50px;">
        </fieldset>
    </fieldset>

    <fieldset  style = "display:inline-block;">
        <legend>Object 2</legend>
        <fieldset style="float:left;margin:5px">
            x (m):<input type="text" class = "input" value="6" id="in_t1_x2" style="width:50px;">
            y (m):<input type="text" class = "input" value="2" id="in_t1_y2" style="width:50px;">
        </fieldset>

        <fieldset style="float:left;margin:5px">
            v (m/s):<input type="text" class = "input" value="1.2" id="in_t1_v2" style="width:50px;">
            angle (radians):<input type="text" class = "input" value="3.5" id="in_t1_a2" style="width:50px;">
        </fieldset>
    </fieldset>

    <fieldset  style = "display:inline-block;">
        <legend>Object 3 (Distractor)</legend>
        <fieldset style="float:left;margin:5px">
            x (m):<input type="text" class = "input" value="5" id="in_t1_x3" style="width:50px;">
            y (m):<input type="text" class = "input" value="2" id="in_t1_y3" style="width:50px;">
        </fieldset>

        <fieldset style="float:left;margin:5px">
            v (m/s):<input type="text" class = "input" value="1.2" id="in_t1_v3" style="width:50px;">
            angle (radians):<input type="text" class = "input" value="3.5" id="in_t1_a3" style="width:50px;">
        </fieldset>
    </fieldset>

    <fieldset  style = "display:inline-block;">
        <legend>Wall</legend>
        <fieldset style="float:left;margin:5px">
            angle (radians):<input type="text" class = "input" value="0.5" id="in_t1_a_wall" style="width:50px;">
        </fieldset>
    </fieldset>

    <ol>
        <li>Choose the settings.</li>
        <li>Hit start to watch clip.</li>
        <li>When the animation freezes, click on the ball that you think will hit the wall first</li>
    </ol>

    <div id="start_button_div">
        <button class="button" id = "startBtnTask1" onclick="StartTask1();">Start</button>
    </div>
    <br>
    <iframe src="iframe1.html" width=600 height=400 id="task1_frame" name="task1_frame" tabindex="0"></iframe>
    <br><br><br>
</div>

<!-- TASK 2 -->
<div sid="task2" style = "width: 900px; margin: 0 auto;">
    <h2>Task 2: Physical Linda</h2>

    <fieldset style = "display:inline-block;">
        <legend>Object 1</legend>
        <fieldset style="float:left;margin:5px">
            x (m):<input type="text" class = "input" value="2" id="in_t2_x1" style="width:50px;">
            y (m):<input type="text" class = "input" value="2" id="in_t2_y1" style="width:50px;">
        </fieldset>

        <fieldset style="float:left;margin:5px">
            v (m/s):<input type="text" class = "input" value="1.2" id="in_t2_v1" style="width:50px;">
            angle (radians):<input type="text" class = "input" value="0.2" id="in_t2_a1" style="width:50px;">
        </fieldset>
    </fieldset>

    <fieldset  style = "display:inline-block;">
        <legend>Object 2</legend>
        <fieldset style="float:left;margin:5px">
            x (m):<input type="text" class = "input" value="3" id="in_t2_x2" style="width:50px;">
            y (m):<input type="text" class = "input" value="2.05" id="in_t2_y2" style="width:50px;">
        </fieldset>

        <fieldset style="float:left;margin:5px">
            v (m/s):<input type="text" class = "input" value="1.5" id="in_t2_v2" style="width:50px;">
            angle (radians):<input type="text" class = "input" value="0.1" id="in_t2_a2" style="width:50px;">
        </fieldset>
    </fieldset>

    <ol>
        <li>Choose the settings.</li>
        <li>Hit start to watch clip.</li>
    </ol>

    <div id="start_button_div">
    <button class="button" id = "startBtnTask2" onclick="StartTask2();">Start</button>
    </div>
    <br>
    <iframe src="iframe2.html" width=600 height=400 id="task2_frame" name="task2_frame" tabindex="0"></iframe>
    <br><br><br>
</div>


<!-- TASK 3 -->
<div sid="task3" style = "width: 900px; margin: 0 auto;">
    <h2>Task 3: Block towers</h2>
    
    <fieldset style = "display:inline-block;">
        <legend>Number of blocks</legend>
        <fieldset style="float:left;margin:5px">
            Red <input type="text" class = "input" value="3" id="in_t3_Nr" style="width:50px;">
            Green <input type="text" class = "input" value="3" id="in_t3_Ng" style="width:50px;">
            Blue <input type="text" class = "input" value="3" id="in_t3_Nb" style="width:50px;">
        </fieldset>
    </fieldset>

    <ol>
        <li>Load the number of blocks you want.</li>
        <li>Arrange them by left hold clicking and dragging them.</li>
        <li>You may rotate objects with 'x' and 'y' while hold clicking.
        <li>Hit "Start" to start the physics simulator.</li>
        <li>Hit "Strop" to stop the physics simulator
        <li>Hit "Reset" to put the objects back where they had been before you ran the simulator.</li>
        <li>Read off object positions from text box below.  "Current locations" is set whenever you manually move an object.  "Starting locations" is set whenever you start the physics simulator.  "Ending state" is set whenever you stop the simulator.</li>
    </ol>

    <div>
    <button class="button" id = "loadBtnTask3" onclick="StartTask3();">Load</button>
&nbsp;&nbsp;
    <button class="button" id = "startBtnTask3"  disabled onclick="StartPhysicsTask3();">Start physics</button>
&nbsp;&nbsp;
    <button class="button" id = "stopBtnTask3"  disabled onclick="StopPhysicsTask3();">Stop physics</button>
&nbsp;&nbsp;
    <button class="button" id = "resetBtnTask3"  disabled onclick="ResetPhysicsTask3();">Reset objects</button>
    </div>
    <br>
    <iframe src="iframe3.html" width=600 height=400 id="task3_frame" name="task3_frame" tabindex="0"></iframe>
    <textarea id = "conditiondetails" rows="40" cols="100">
    </textarea>
    <br><br><br>
</div>

    <script>

        // Start the various demos
        function StartTask1() {

            var input_params = [{x:Number($(in_t1_x1).val()),
             y:Number($(in_t1_y1).val()),
             v:Number($(in_t1_v1).val()),
             a:Number($(in_t1_a1).val())},

             {x:Number($(in_t1_x2).val()),
                 y:Number($(in_t1_y2).val()),
                 v:Number($(in_t1_v2).val()),
                 a:Number($(in_t1_a2).val())},

            {x:Number($(in_t1_x3).val()),
                 y:Number($(in_t1_y3).val()),
                 v:Number($(in_t1_v3).val()),
                 a:Number($(in_t1_a3).val())},

             {a:Number($(in_t1_a_wall).val())}
                 ];


                 var iframe = document.getElementById("task1_frame");

                 if (iframe) {
                    var iframeContent = (iframe.contentWindow || iframe.contentDocument);
                    console.log('Starting iframe');

                    document.getElementById("startBtnTask1").disabled = true;

                    iframeContent.Start(input_params);
                }
            }

        function StartTask2() {
            

            var input_params = [{x:Number($(in_t2_x1).val()),
                y:Number($(in_t2_y1).val()),
                v:Number($(in_t2_v1).val()),
                a:Number($(in_t2_a1).val())},
                {x:Number($(in_t2_x2).val()),
                y:Number($(in_t2_y2).val()),
                v:Number($(in_t2_v2).val()),
                a:Number($(in_t2_a2).val())}
                ];

             var iframe = document.getElementById("task2_frame");

             if (iframe) {
                console.log('got here');
                var iframeContent = (iframe.contentWindow || iframe.contentDocument);
                console.log('Starting Task 2');

                document.getElementById("startBtnTask2").disabled = true;

                iframeContent.Start(input_params);
            }
        }
        function StartTask3() {
            

            var input_params = {r:Number($(in_t3_Nr).val()), g:Number($(in_t3_Ng).val()), b:Number($(in_t3_Nb).val())};

             var iframe = document.getElementById("task3_frame");

             if (iframe) {
                var iframeContent = (iframe.contentWindow || iframe.contentDocument);
                console.log('Starting Task 3');
                
                document.getElementById("loadBtnTask3").disabled = false;
                document.getElementById("stopBtnTask3").disabled = true;
                document.getElementById("startBtnTask3").disabled = false;
                document.getElementById("resetBtnTask3").disabled = true;

                iframeContent.LoadWorld(input_params);
            }
        }

        function StartPhysicsTask3() {
            
             var iframe = document.getElementById("task3_frame");

             if (iframe) {
                var iframeContent = (iframe.contentWindow || iframe.contentDocument);
                console.log('Starting Physics Task 3');
            
                document.getElementById("loadBtnTask3").disabled = false;
                document.getElementById("stopBtnTask3").disabled = false;
                document.getElementById("startBtnTask3").disabled = true;
                document.getElementById("resetBtnTask3").disabled = false;

                iframeContent.StartPhysics();
            }
        }

        function StopPhysicsTask3() {
            
             var iframe = document.getElementById("task3_frame");

             if (iframe) {
                var iframeContent = (iframe.contentWindow || iframe.contentDocument);
                console.log('Stopping Physics Task 3');
            
                document.getElementById("loadBtnTask3").disabled = false;
                document.getElementById("startBtnTask3").disabled = false;
                document.getElementById("stopBtnTask3").disabled = true;
                document.getElementById("resetBtnTask3").disabled = false;

                iframeContent.StopPhysics();
            }
        }

        function ResetPhysicsTask3() {
            
             var iframe = document.getElementById("task3_frame");

             if (iframe) {
                var iframeContent = (iframe.contentWindow || iframe.contentDocument);
                console.log('Resetting physics Task 3');
                
                document.getElementById("loadBtnTask3").disabled = true;
                document.getElementById("startBtnTask3").disabled = false;
                document.getElementById("stopBtnTask3").disabled = true;
                document.getElementById("resetBtnTask3").disabled = true;

                iframeContent.ResetPhysics();
            }
        }

        function ResetTask1() {
            document.getElementById("startBtnTask1").disabled = false;
        }

        function ResetTask2() {
            document.getElementById("startBtnTask2").disabled = false;
        }

        </script>

    </body>