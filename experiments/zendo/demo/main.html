<!DOCTYPE html>
<html>

<head>
    <title>Zendo</title>

    <!-- Libraries -->
    <script src="lib/ivank.js"></script>
    <script src="lib/jquery.min.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
</head>

<body onload="StartIframe();">

<h1>Zendo</h1>

<div id="game">
    <iframe src="zendo_iframe.html" width=800 height=600 id="game_frame" name="game_frame" tabindex="0"></iframe>
</div>

<div>
<ol>
<li>Click on the buttons at the bottom to add objects to the world.</li>
<li>Arrange them by clicking and dragging them around.</li>
<li>While dragging an object, press "Z" to rotate it left and "X" to rotate it right</li>
<li>Right click on objects to remove it.</li>
<li>Click "Test" to find out if your arrangement follows the rule.</li>
<li>Try to guess the rule!</li>
</ol>

</div>

<script>

all_points = {small:{
                    rhs:[{x: 0.2, y: 0}, {x: 0.3, y: 0}, {x: 0.05, y:0.667}, {x: -0.05, y:0.667}],
                    lhs:[{x: -0.2, y: 0}, {x: -0.3, y: 0}, {x: -0.05, y:0.667}, {x: 0.05, y:0.667}]
                    },
                med:{
                    rhs:[{x: 0.3, y: 0}, {x: 0.4, y: 0}, {x: 0.05, y:1}, {x: -0.05, y:1}],
                    lhs:[{x: -0.3, y: 0}, {x: -0.4, y: 0}, {x: -0.05, y:1}, {x: 0.05, y:1}]
                    },
                large:{
                    rhs:[{x: 0.4, y: 0}, {x: 0.5, y: 0}, {x: 0.05, y:1.333}, {x: -0.05, y:1.333}],
                    lhs:[{x: -0.4, y: 0}, {x: -0.5, y: 0}, {x: -0.05, y:1.333}, {x: 0.05, y:1.333}]
                    }};

//The colours of the blocks
cols = [0xff0000, 0x00ff00, 0x0000ff];
ratio = window.devicePixelRatio * 30;
piece_buttons = [];

// Start the game
function StartIframe() {

    //input_params = Number($(input_field).val());

    var iframe = document.getElementById("game_frame");

    if (iframe) {
        var iframeContent = (iframe.contentWindow || iframe.contentDocument);
        console.log('Starting iframe');
        iframeContent.Start(null);
    }
    

}
    
function AddPiece(e)
{
    console.log('Add a:', e.target, e.target.obj_ix);
}
function onMOu(e){ e.target.alpha = 0.7; }
</script>

</body>